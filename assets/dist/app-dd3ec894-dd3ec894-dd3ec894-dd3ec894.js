(function(e){function t(e,t){return function(n){return u(e.call(this,n),t)}}function n(e,t){return function(n){return this.lang().ordinal(e.call(this,n),t)}}function a(){}function r(e){v(e),s(this,e)}function i(e){var t=m(e),n=t.year||0,a=t.month||0,r=t.week||0,i=t.day||0,s=t.hour||0,o=t.minute||0,u=t.second||0,c=t.millisecond||0;this._input=e,this._milliseconds=+c+1e3*u+6e4*o+36e5*s,this._days=+i+7*r,this._months=+a+12*n,this._data={},this._bubble()}function s(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function o(e){return 0>e?Math.ceil(e):Math.floor(e)}function u(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n}function c(e,t,n,a){var r,i,s=t._milliseconds,o=t._days,u=t._months;s&&e._d.setTime(+e._d+s*n),(o||u)&&(r=e.minute(),i=e.hour()),o&&e.date(e.date()+o*n),u&&e.month(e.month()+u*n),s&&!a&&tt.updateOffset(e),(o||u)&&(e.minute(r),e.hour(i))}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function h(e,t,n){var a,r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0;for(a=0;r>a;a++)(n&&e[a]!==t[a]||!n&&g(e[a])!==g(t[a]))&&s++;return s+i}function f(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=Ut[e]||$t[t]||t}return e}function m(e){var t,n,a={};for(n in e)e.hasOwnProperty(n)&&(t=f(n),t&&(a[t]=e[n]));return a}function p(t){var n,a;if(0===t.indexOf("week"))n=7,a="day";else{if(0!==t.indexOf("month"))return;n=12,a="month"}tt[t]=function(r,i){var s,o,u=tt.fn._lang[t],c=[];if("number"==typeof r&&(i=r,r=e),o=function(e){var t=tt().utc().set(a,e);return u.call(tt.fn._lang,t,r||"")},null!=i)return o(i);for(s=0;n>s;s++)c.push(o(s));return c}}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function _(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function y(e){return w(e)?366:365}function w(e){return 0===e%4&&0!==e%100||0===e%400}function v(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[st]<0||e._a[st]>11?st:e._a[ot]<1||e._a[ot]>_(e._a[it],e._a[st])?ot:e._a[ut]<0||e._a[ut]>23?ut:e._a[ct]<0||e._a[ct]>59?ct:e._a[dt]<0||e._a[dt]>59?dt:e._a[lt]<0||e._a[lt]>999?lt:-1,e._pf._overflowDayOfYear&&(it>t||t>ot)&&(t=ot),e._pf.overflow=t)}function k(e){e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function D(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function M(e){return e?e.toLowerCase().replace("_","-"):e}function T(e,t){return t.abbr=e,ht[e]||(ht[e]=new a),ht[e].set(t),ht[e]}function b(e){delete ht[e]}function S(e){var t,n,a,r,i=0,s=function(e){if(!ht[e]&&ft)try{require("./lang/"+e)}catch(t){}return ht[e]};if(!e)return tt.fn._lang;if(!d(e)){if(n=s(e))return n;e=[e]}for(;i<e.length;){for(r=M(e[i]).split("-"),t=r.length,a=M(e[i+1]),a=a?a.split("-"):null;t>0;){if(n=s(r.slice(0,t).join("-")))return n;if(a&&a.length>=t&&h(r,a,!0)>=t-1)break;t--}i++}return tt.fn._lang}function Y(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function x(e){var t,n,a=e.match(_t);for(t=0,n=a.length;n>t;t++)a[t]=zt[a[t]]?zt[a[t]]:Y(a[t]);return function(r){var i="";for(t=0;n>t;t++)i+=a[t]instanceof Function?a[t].call(r,e):a[t];return i}}function G(e,t){return e.isValid()?(t=C(t,e.lang()),Ft[t]||(Ft[t]=x(t)),Ft[t](e)):e.lang().invalidDate()}function C(e,t){function n(e){return t.longDateFormat(e)||e}var a=5;for(yt.lastIndex=0;a>=0&&yt.test(e);)e=e.replace(yt,n),yt.lastIndex=0,a-=1;return e}function O(e,t){var n;switch(e){case"DDDD":return kt;case"YYYY":case"GGGG":case"gggg":return Dt;case"YYYYY":case"GGGGG":case"ggggg":return Mt;case"S":case"SS":case"SSS":case"DDD":return vt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return bt;case"a":case"A":return S(t._l)._meridiemParse;case"X":return xt;case"Z":case"ZZ":return St;case"T":return Yt;case"SSSS":return Tt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"ww":case"W":case"WW":case"e":case"E":return wt;default:return n=new RegExp(L(F(e.replace("\\","")),"i"))}}function P(e){var t=(St.exec(e)||[])[0],n=(t+"").match(Rt)||["-",0,0],a=+(60*n[1])+g(n[2]);return"+"===n[0]?-a:a}function R(e,t,n){var a,r=n._a;switch(e){case"M":case"MM":null!=t&&(r[st]=g(t)-1);break;case"MMM":case"MMMM":a=S(n._l).monthsParse(t),null!=a?r[st]=a:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[ot]=g(t));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=g(t));break;case"YY":r[it]=g(t)+(g(t)>68?1900:2e3);break;case"YYYY":case"YYYYY":r[it]=g(t);break;case"a":case"A":n._isPm=S(n._l).isPM(t);break;case"H":case"HH":case"h":case"hh":r[ut]=g(t);break;case"m":case"mm":r[ct]=g(t);break;case"s":case"ss":r[dt]=g(t);break;case"S":case"SS":case"SSS":case"SSSS":r[lt]=g(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=P(t);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":e=e.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=t)}}function W(e){var t,n,a,r,i,s,o,u,c,d,l=[];if(!e._d){for(a=U(e),e._w&&null==e._a[ot]&&null==e._a[st]&&(i=function(t){return t?t.length<3?parseInt(t,10)>68?"19"+t:"20"+t:t:null==e._a[it]?tt().weekYear():e._a[it]},s=e._w,null!=s.GG||null!=s.W||null!=s.E?o=V(i(s.GG),s.W||1,s.E,4,1):(u=S(e._l),c=null!=s.d?Z(s.d,u):null!=s.e?parseInt(s.e,10)+u._week.dow:0,d=parseInt(s.w,10)||1,null!=s.d&&c<u._week.dow&&d++,o=V(i(s.gg),d,c,u._week.doy,u._week.dow)),e._a[it]=o.year,e._dayOfYear=o.dayOfYear),e._dayOfYear&&(r=null==e._a[it]?a[it]:e._a[it],e._dayOfYear>y(r)&&(e._pf._overflowDayOfYear=!0),n=N(r,0,e._dayOfYear),e._a[st]=n.getUTCMonth(),e._a[ot]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=l[t]=a[t];for(;7>t;t++)e._a[t]=l[t]=null==e._a[t]?2===t?1:0:e._a[t];l[ut]+=g((e._tzm||0)/60),l[ct]+=g((e._tzm||0)%60),e._d=(e._useUTC?N:E).apply(null,l)}}function A(e){var t;e._d||(t=m(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],W(e))}function U(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function $(e){e._a=[],e._pf.empty=!0;var t,n,a,r,i,s=S(e._l),o=""+e._i,u=o.length,c=0;for(a=C(e._f,s).match(_t)||[],t=0;t<a.length;t++)r=a[t],n=(O(r,e).exec(o)||[])[0],n&&(i=o.substr(0,o.indexOf(n)),i.length>0&&e._pf.unusedInput.push(i),o=o.slice(o.indexOf(n)+n.length),c+=n.length),zt[r]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(r),R(r,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=u-c,o.length>0&&e._pf.unusedInput.push(o),e._isPm&&e._a[ut]<12&&(e._a[ut]+=12),e._isPm===!1&&12===e._a[ut]&&(e._a[ut]=0),W(e),v(e)}function F(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,r){return t||n||a||r})}function L(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function I(e){var t,n,a,r,i;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)i=0,t=s({},e),k(t),t._f=e._f[r],$(t),D(t)&&(i+=t._pf.charsLeftOver,i+=10*t._pf.unusedTokens.length,t._pf.score=i,(null==a||a>i)&&(a=i,n=t));s(e,n||t)}function z(e){var t,n=e._i,a=Gt.exec(n);if(a){for(e._pf.iso=!0,t=4;t>0;t--)if(a[t]){e._f=Ot[t-1]+(a[6]||" ");break}for(t=0;4>t;t++)if(Pt[t][1].exec(n)){e._f+=Pt[t][0];break}St.exec(n)&&(e._f+="Z"),$(e)}else e._d=new Date(n)}function H(t){var n=t._i,a=mt.exec(n);n===e?t._d=new Date:a?t._d=new Date(+a[1]):"string"==typeof n?z(t):d(n)?(t._a=n.slice(0),W(t)):l(n)?t._d=new Date(+n):"object"==typeof n?A(t):t._d=new Date(n)}function E(e,t,n,a,r,i,s){var o=new Date(e,t,n,a,r,i,s);return 1970>e&&o.setFullYear(e),o}function N(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function Z(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function j(e,t,n,a,r){return r.relativeTime(t||1,!!n,e,a)}function B(e,t,n){var a=rt(Math.abs(e)/1e3),r=rt(a/60),i=rt(r/60),s=rt(i/24),o=rt(s/365),u=45>a&&["s",a]||1===r&&["m"]||45>r&&["mm",r]||1===i&&["h"]||22>i&&["hh",i]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",rt(s/30)]||1===o&&["y"]||["yy",o];return u[2]=t,u[3]=e>0,u[4]=n,j.apply({},u)}function q(e,t,n){var a,r=n-t,i=n-e.day();return i>r&&(i-=7),r-7>i&&(i+=7),a=tt(e).add("d",i),{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function V(e,t,n,a,r){var i,s,o=new Date(Date.UTC(e,0)).getUTCDay();return n=null!=n?n:r,i=r-o+(o>a?7:0),s=7*(t-1)+(n-r)+i+1,{year:s>0?e:e-1,dayOfYear:s>0?s:y(e-1)+s}}function J(e){var t=e._i,n=e._f;return"undefined"==typeof e._pf&&k(e),null===t?tt.invalid({nullInput:!0}):("string"==typeof t&&(e._i=t=S().preparse(t)),tt.isMoment(t)?(e=s({},t),e._d=new Date(+t._d)):n?d(n)?I(e):$(e):H(e),new r(e))}function Q(e,t){tt.fn[e]=tt.fn[e+"s"]=function(e){var n=this._isUTC?"UTC":"";return null!=e?(this._d["set"+n+t](e),tt.updateOffset(this),this):this._d["get"+n+t]()}}function X(e){tt.duration.fn[e]=function(){return this._data[e]}}function K(e,t){tt.duration.fn["as"+e]=function(){return+this/t}}function et(e){var t=!1,n=tt;"undefined"==typeof ender&&(this.moment=e?function(){return!t&&console&&console.warn&&(t=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),n.apply(null,arguments)}:tt)}for(var tt,nt,at="2.4.0",rt=Math.round,it=0,st=1,ot=2,ut=3,ct=4,dt=5,lt=6,ht={},ft="undefined"!=typeof module&&module.exports,mt=/^\/?Date\((\-?\d+)/i,pt=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,gt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,_t=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,yt=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,wt=/\d\d?/,vt=/\d{1,3}/,kt=/\d{3}/,Dt=/\d{1,4}/,Mt=/[+\-]?\d{1,6}/,Tt=/\d+/,bt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,St=/Z|[\+\-]\d\d:?\d\d/i,Yt=/T/i,xt=/[\+\-]?\d+(\.\d{1,3})?/,Gt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d:?\d\d|Z)?)?$/,Ct="YYYY-MM-DDTHH:mm:ssZ",Ot=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Pt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Rt=/([\+\-]|\d\d)/gi,Wt="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),At={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ut={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$t={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ft={},Lt="DDD w W M D d".split(" "),It="M D H h m s w W".split(" "),zt={M:function(){return this.month()+1},MMM:function(e){return this.lang().monthsShort(this,e)},MMMM:function(e){return this.lang().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.lang().weekdaysMin(this,e)},ddd:function(e){return this.lang().weekdaysShort(this,e)},dddd:function(e){return this.lang().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return u(this.year()%100,2)},YYYY:function(){return u(this.year(),4)},YYYYY:function(){return u(this.year(),5)},gg:function(){return u(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return u(this.weekYear(),5)},GG:function(){return u(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return u(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return u(g(this.milliseconds()/10),2)},SSS:function(){return u(this.milliseconds(),3)},SSSS:function(){return u(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+u(g(e/60),2)+":"+u(g(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+u(g(10*e/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}},Ht=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Lt.length;)nt=Lt.pop(),zt[nt+"o"]=n(zt[nt],nt);for(;It.length;)nt=It.pop(),zt[nt+nt]=t(zt[nt],2);for(zt.DDDD=t(zt.DDD,3),s(a.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,a;for(this._monthsParse||(this._monthsParse=[]),t=0;12>t;t++)if(this._monthsParse[t]||(n=tt.utc([2e3,t]),a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(a.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,a;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=tt([2e3,1]).day(t),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,a){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,a):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return q(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),tt=function(t,n,a,r){return"boolean"==typeof a&&(r=a,a=e),J({_i:t,_f:n,_l:a,_strict:r,_isUTC:!1})},tt.utc=function(t,n,a,r){var i;return"boolean"==typeof a&&(r=a,a=e),i=J({_useUTC:!0,_isUTC:!0,_l:a,_i:t,_f:n,_strict:r}).utc()},tt.unix=function(e){return tt(1e3*e)},tt.duration=function(e,t){var n,a,r,s=tt.isDuration(e),o="number"==typeof e,u=s?e._input:o?{}:e,c=null;return o?t?u[t]=e:u.milliseconds=e:(c=pt.exec(e))?(n="-"===c[1]?-1:1,u={y:0,d:g(c[ot])*n,h:g(c[ut])*n,m:g(c[ct])*n,s:g(c[dt])*n,ms:g(c[lt])*n}):(c=gt.exec(e))&&(n="-"===c[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},u={y:r(c[2]),M:r(c[3]),d:r(c[4]),h:r(c[5]),m:r(c[6]),s:r(c[7]),w:r(c[8])}),a=new i(u),s&&e.hasOwnProperty("_lang")&&(a._lang=e._lang),a},tt.version=at,tt.defaultFormat=Ct,tt.updateOffset=function(){},tt.lang=function(e,t){var n;return e?(t?T(M(e),t):null===t?(b(e),e="en"):ht[e]||S(e),n=tt.duration.fn._lang=tt.fn._lang=S(e),n._abbr):tt.fn._lang._abbr},tt.langData=function(e){return e&&e._lang&&e._lang._abbr&&(e=e._lang._abbr),S(e)},tt.isMoment=function(e){return e instanceof r},tt.isDuration=function(e){return e instanceof i},nt=Ht.length-1;nt>=0;--nt)p(Ht[nt]);for(tt.normalizeUnits=function(e){return f(e)},tt.invalid=function(e){var t=tt.utc(0/0);return null!=e?s(t._pf,e):t._pf.userInvalidated=!0,t},tt.parseZone=function(e){return tt(e).parseZone()},s(tt.fn=r.prototype,{clone:function(){return tt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return G(tt(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return D(this)},isDSTShifted:function(){return this._a?this.isValid()&&h(this._a,(this._isUTC?tt.utc(this._a):tt(this._a)).toArray())>0:!1},parsingFlags:function(){return s({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(e){var t=G(this,e||tt.defaultFormat);return this.lang().postformat(t)},add:function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,n,1),this},subtract:function(e,t){var n;return n="string"==typeof e?tt.duration(+t,e):tt.duration(e,t),c(this,n,-1),this},diff:function(e,t,n){var a,r,i=this._isUTC?tt(e).zone(this._offset||0):tt(e).local(),s=6e4*(this.zone()-i.zone());return t=f(t),"year"===t||"month"===t?(a=432e5*(this.daysInMonth()+i.daysInMonth()),r=12*(this.year()-i.year())+(this.month()-i.month()),r+=(this-tt(this).startOf("month")-(i-tt(i).startOf("month")))/a,r-=6e4*(this.zone()-tt(this).startOf("month").zone()-(i.zone()-tt(i).startOf("month").zone()))/a,"year"===t&&(r/=12)):(a=this-i,r="second"===t?a/1e3:"minute"===t?a/6e4:"hour"===t?a/36e5:"day"===t?(a-s)/864e5:"week"===t?(a-s)/6048e5:a),n?r:o(r)},from:function(e,t){return tt.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)},fromNow:function(e){return this.from(tt(),e)},calendar:function(){var e=this.diff(tt().zone(this.zone()).startOf("day"),"days",!0),t=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(t,this))},isLeapYear:function(){return w(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Z(e,this.lang()),this.add({d:e-t})):t},month:function(e){var t,n=this._isUTC?"UTC":"";return null!=e?"string"==typeof e&&(e=this.lang().monthsParse(e),"number"!=typeof e)?this:(t=this.date(),this.date(1),this._d["set"+n+"Month"](e),this.date(Math.min(t,this.daysInMonth())),tt.updateOffset(this),this):this._d["get"+n+"Month"]()},startOf:function(e){switch(e=f(e)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),this},endOf:function(e){return e=f(e),this.startOf(e).add("isoWeek"===e?"week":e,1).subtract("ms",1)},isAfter:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)>+tt(e).startOf(t)},isBefore:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)<+tt(e).startOf(t)},isSame:function(e,t){return t="undefined"!=typeof t?t:"millisecond",+this.clone().startOf(t)===+tt(e).startOf(t)},min:function(e){return e=tt.apply(null,arguments),this>e?this:e},max:function(e){return e=tt.apply(null,arguments),e>this?this:e},zone:function(e){var t=this._offset||0;return null==e?this._isUTC?t:this._d.getTimezoneOffset():("string"==typeof e&&(e=P(e)),Math.abs(e)<16&&(e=60*e),this._offset=e,this._isUTC=!0,t!==e&&c(this,tt.duration(t-e,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?tt(e).zone():0,0===(this.zone()-e)%60},daysInMonth:function(){return _(this.year(),this.month())},dayOfYear:function(e){var t=rt((tt(this).startOf("day")-tt(this).startOf("year"))/864e5)+1;return null==e?t:this.add("d",e-t)},weekYear:function(e){var t=q(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==e?t:this.add("y",e-t)},isoWeekYear:function(e){var t=q(this,1,4).year;return null==e?t:this.add("y",e-t)},week:function(e){var t=this.lang().week(this);return null==e?t:this.add("d",7*(e-t))},isoWeek:function(e){var t=q(this,1,4).week;return null==e?t:this.add("d",7*(e-t))},weekday:function(e){var t=(this.day()+7-this.lang()._week.dow)%7;return null==e?t:this.add("d",e-t)},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},get:function(e){return e=f(e),this[e]()},set:function(e,t){return e=f(e),"function"==typeof this[e]&&this[e](t),this},lang:function(t){return t===e?this._lang:(this._lang=S(t),this)}}),nt=0;nt<Wt.length;nt++)Q(Wt[nt].toLowerCase().replace(/s$/,""),Wt[nt]);Q("year","FullYear"),tt.fn.days=tt.fn.day,tt.fn.months=tt.fn.month,tt.fn.weeks=tt.fn.week,tt.fn.isoWeeks=tt.fn.isoWeek,tt.fn.toJSON=tt.fn.toISOString,s(tt.duration.fn=i.prototype,{_bubble:function(){var e,t,n,a,r=this._milliseconds,i=this._days,s=this._months,u=this._data;u.milliseconds=r%1e3,e=o(r/1e3),u.seconds=e%60,t=o(e/60),u.minutes=t%60,n=o(t/60),u.hours=n%24,i+=o(n/24),u.days=i%30,s+=o(i/30),u.months=s%12,a=o(s/12),u.years=a},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*g(this._months/12)},humanize:function(e){var t=+this,n=B(t,!e,this.lang());return e&&(n=this.lang().pastFuture(t,n)),this.lang().postformat(n)},add:function(e,t){var n=tt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=tt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=f(e),this[e.toLowerCase()+"s"]()},as:function(e){return e=f(e),this["as"+e.charAt(0).toUpperCase()+e.slice(1)+"s"]()},lang:tt.fn.lang,toIsoString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),a=Math.abs(this.hours()),r=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(a||r||i?"T":"")+(a?a+"H":"")+(r?r+"M":"")+(i?i+"S":""):"P0D"}});for(nt in At)At.hasOwnProperty(nt)&&(K(nt,At[nt]),X(nt.toLowerCase()));K("Weeks",6048e5),tt.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},tt.lang("en",{ordinal:function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),ft?(module.exports=tt,et(!0)):"function"==typeof define&&define.amd?define("moment",function(t,n,a){return a.config().noGlobal!==!0&&et(a.config().noGlobal===e),tt}):et()}).call(this),function(e,t){"use strict";var n=e.module("fsDashboard",["d3"]);n.config(["$routeProvider","$locationProvider",function(e){e.when("/",{templateUrl:t+"templates/dashboard.html",controller:"IndexCtrl"}).when("/app/:name",{templateUrl:t+"templates/details.html",controller:"AppDetailsCtrl"}).when("/app/:name/uptime",{templateUrl:t+"templates/details.html",controller:"AppDetailsCtrl"}).when("/performance/:name",{templateUrl:t+"templates/performance.html",controller:"AppPerformanceCtrl"}).when("/service/:name",{templateUrl:t+"templates/details.html",controller:"ServiceDetailsCtrl"}).when("/upstream/:name",{templateUrl:t+"templates/details.html",controller:"UpstreamDetailsCtrl"}).when("/change",{templateUrl:t+"templates/change_log.html",controller:"ChangeLogCtrl"})}])}(window.angular,window.assetPath),function(e){"use strict";var t=e.module("fsDashboard");t.config(["$locationProvider",function(e){e.html5Mode(!0)}])}(window.angular),function(e,t,n){"use strict";function a(e){e.forceDesktop=window.forceDesktop,e.hash=window.location.hash,window.clearTimeout(o)}function r(e){return{green:"success",good:"success",yellow:"warning",warning:"warning",slow:"warning",red:"danger",blue:"danger",down:"danger"}[e]||"default"}function i(e){var t={success:"ok-sign",warning:"warning-sign",danger:"minus-sign","default":"question-sign"};return"glyphicon-"+t[e]}function s(e,t){var n,a;for(n=0,a=t.length;a>n;n++)e[t[n]]=!0}var o,u=e.module("fsDashboard"),c=function(e,n){function a(t){e.current&&(e.current.isActive=!1),t.isActive=!0,n(t)}function r(){a(e.history[0]),e.isHistorying=!1,e.locked=!1}e.locked=!1,e.mouseIn=function(t){e.locked||(e.isHistorying=!0,a(t))},e.clickCurrent=function(t){a(t),e.locked=!0},e.mouseGone=function(){e.locked||r()},e.reset=r,t(document).off("keydown").on("keydown",function(t){e.locked&&27===t.which&&e.$apply(r)})};u.controller("IndexCtrl",["$rootScope","$scope","$q","dashService",function(e,t,r,i){function s(){var a=[i.upstream.index(),i.app.index(),i.service.index()];e.updated={},a[0].then(function(a){t.upstreamList=a,t.loading.upstream=!1,a[0]&&(e.updated={formatted:n(a[0].created_at).format("h:mm a")})}),a[1].then(function(e){t.appList=e,t.loading.app=!1}),a[2].then(function(e){t.serviceList=e,t.loading.services=!1}),r.all(a).then(function(){o=window.setTimeout(s,6e4)})}a(e),e.refresh=s,e.pageType="index",t.loading={upstream:!0,app:!0,services:!0},t.upstreamList=[],t.appList=[],t.serviceList=[],s()}]),u.controller("UpstreamDetailsCtrl",["$rootScope","$scope","$routeParams","dashService",function(e,t,u,d){function l(){e.updated={},d.upstream.details(f).then(function(a){var r=a[0];h(r),e.updated={formatted:n(r.created_at).format("h:mm a")},t.history=a,t.loading.main=!1,o=window.setTimeout(l,6e4)})}function h(e){var a=n(e.created_at),s=e.status,o=r(s);t.current=e,t.updated={formatted:a.format("h:mm a"),delta:a.fromNow()},t.status=s,t.codes=e.meta.codes,t.error_rate=e.meta.error_rate,t.statusClass=o,t.glyph=i(o),t.issues=e.meta.issues}a(e);var f=u.name;e.refresh=l,e.pageType="upstream",t.pageTitle=f+" Status","HA Proxy"===f&&s(t,["hasThroughput","hasErrorRate","hasStatus"]),f.match("Heroku")&&s(t,["hasIssues"]),t.loading={main:!0},l(),c(t,h)}]),u.controller("AppDetailsCtrl",["$rootScope","$scope","$routeParams","$location","$q","dashService",function(e,t,u,d,l,h){function f(){var n=[h.app.details(g),h.service.app(g),h.change.app(g)];e.updated={},n[0].then(function(e){var n=e[0];m(n),t.history=e,t.loading.main=!1}),n[1].then(function(e){t.services=e,t.loading.services=!1}),n[2].then(function(e){t.events=e,t.loading.events=!1}),l.all(n).then(function(){o=window.setTimeout(f,6e4)})}function m(n){var a=n.status,s=r(a);n.app||(n.app={codes:{"2xx":null,"3xx":null,"4xx":null,"5xx":null},memory:null,time:{p95:null},error_rate:null,app_errors:null}),t.current=n,t.codes=n.app.codes,t.memory=n.app.memory,t.time=n.app.time,t.error_rate=n.app.error_rate,t.errors=n.app_errors,e.updated=p(n.bucket_time),t.status=a,t.statusClass=s,t.glyph=i(s)}function p(e){var t=n(e);return{formatted:t.format("h:mm a"),delta:t.fromNow()}}a(e);var g=u.name;t.appName=g,e.refresh=f,e.pageType="app",t.pageTitle=g+" Status",s(t,["hasThroughput","hasRespTime","hasMemory","hasErrorRate","hasStatus","isHeroku","hasServices","hasEvents","hasPeformanceTabs"]),t.loading={main:!0,services:!0,events:!0},t.goToService=function(e){d.path("/service/"+encodeURIComponent(e))},f(),c(t,m)}]),u.controller("AppPerformanceCtrl",["$rootScope","$scope","$routeParams","$location","$q","dashService",function(e,t,r,i,u,c){function l(){var n=[c.performance.details(f),c.performance.graph(f),c.performance.pages(f)];n[0].then(function(n){window.clearTimeout(o),e.updated=h(n[0].created_at);var a=[{name:"p95",data:[]},{name:"p50",data:[]}],r={p95:a[0].data,p50:a[1].data};n.map(function(e){var t=new Date(e.created_at).getTime()/1e3-d;r.p95.unshift({label:"p95",x:t,y:Number(e.meta.p95)}),r.p50.unshift({label:"p50",x:t,y:Number(e.meta.p50)})}),t.pageReadyGraph={graphData:a}}),n[1].then(function(e){var n=e.meta;e.graphData=[];for(var a in n)n.hasOwnProperty(a)&&e.graphData.push({label:a+"ms",x:Number(a.split("-")[1]),y:Number(n[a])});t.histogramGraph=e,t.histData=e}),n[2].then(function(e){e&&(t.pageData=e.meta.pages)}),u.all(n).then(function(){o=window.setTimeout(l,6e4)})}function h(e){var t=n(e);return{formatted:t.format("h:mm a"),delta:t.fromNow()}}a(e);var f=r.name;0===f.indexOf("search-")&&(f="search"),t.appName=f,e.refresh=l,e.pageType="performance",t.pageTitle=f+" Performance",s(t,["hasPerformance","hasPeformanceTabs"]),t.loading={main:!0},l()}]),u.controller("ServiceDetailsCtrl",["$rootScope","$scope","$routeParams","dashService",function(e,t,u,d){function l(){e.updated={},d.service.details(m).then(function(e){var n=e[0];h(n),t.history=e,t.loading.main=!1,o=window.setTimeout(l,6e4)})}function h(n){if(n){var a=n.status,s=r(a);t.current=n,e.updated=f(n.created_at),t.status=a,t.codes=n.codes,t.time=n.time,t.error_rate=n.error_rate,t.statusClass=s,t.glyph=i(s)}}function f(e){var t=n(e);return{formatted:t.format("h:mm a"),delta:t.fromNow()}}a(e);var m=u.name;e.refresh=l,e.pageType="service",t.pageTitle=m+" Status",s(t,["hasThroughput","hasRespTime","hasErrorRate","hasStatus"]),t.loading={main:!0},l(),c(t,h)}]),u.controller("ChangeLogCtrl",["$rootScope","$scope","dashService","changeService",function(e,t,r,i){function s(){e.updated={},r.change.index().then(function(a){return"string"==typeof a?void(t.loading.main="failed"):(t.events=a,t.loading.events=!1,c=a[a.length-1]._id,o=window.setTimeout(s,6e4),e.updated={formatted:n(a[0].created_at).format("h:mm a")},void(t.loading.main=!1))}),i.repos().then(function(e){t.repos=e.sort()}),i.types().then(function(e){t.types=e.sort()}),u()}function u(){l=Date.now(),h={"1hr":l-d,"3hr":l-3*d,"6hr":l-6*d,"1d":l-24*d}}a(e),e.pageType="change_log",e.refresh=s,t.loading={main:!0};var c,d=36e5,l=Date.now(),h={"1hr":l-d,"3hr":l-3*d,"6hr":l-6*d,"1d":l-24*d};s(),t.timeFilter=function(e){var n=h[t.timeSearch],a=e.timestamp;return a?n?a>n:!0:(a=new Date(e.created_at).getTime(),e.timestamp=a,!0)}}]);var d=60*(new Date).getTimezoneOffset()}(window.angular,window.jQuery,window.moment),function(e,t,n,a){"use strict";var r=e.module("fsDashboard"),i=function(e){return{green:"success",good:"success",yellow:"warning",warning:"warning",slow:"warning",red:"danger",blue:"danger",down:"danger"}[e]||"default"
};r.directive("historyItem",function(){return{restrict:"A",link:function(e){var t=e.item,n=null;t.app?n=Math.floor(t.app.time.p95/100):t.time&&(n=Math.floor(t.time.p95/100)),e.mouseIn=function(){e.$parent.mouseIn(t)},e.clack=function(){e.$parent.clickCurrent(t)},e.mouseGone=function(){e.$parent.mouseGone()},e.className="label-"+i(t.status)}}}),r.directive("eventItem",function(){return{restrict:"A",templateUrl:t+"templates/directives/eventItem.html",replace:!0,link:function(e){var t=e.event,a=t.action,r={build:"Successfully built and deployed.",merge:t.meta&&t.meta.message||"",restart:t.meta&&"Auto-restarted: "+t.meta.reason,"restart.not_configured":t.meta&&"Auto-restarted: "+t.meta.reason,"status.change":t.meta&&t.meta.reason},i=n(t.created_at);e.src=t.src,e.msg=r[a],e.time={delta:i.fromNow(),formatted:i.format("h:mm a [on] MMM Do YYYY")}}}}),r.directive("statusBtn",["$location",function(e){return{restrict:"A",replace:!0,scope:!0,templateUrl:t+"templates/directives/statusBtn.html",link:function(t,n,a){function r(){return u.repo_name?u.repo_name:u.app&&u.app.repo_name?u.app.repo_name:u.app_errors&&u.app_errors.repo_name?u.app_errors.repo_name:u.name}function s(){return i(u.status)}function o(){t.$apply(function(){e.path("/"+c+"/"+d)})}var u=t.item,c=a.statusType,d=r(),l=d.length>36?d.substr(0,33)+"...":d,h=s(),f={success:"ok-sign",warning:"warning-sign",danger:"minus-sign","default":"question-sign"};n.addClass("col-sm-"+(Math.ceil(l.length/7)+1)).addClass("col-md-"+(Math.ceil(l.length/10)+1)).addClass("btn-"+h).bind("click",o),t.shortName=l,l!==d&&(t.name=d),t.glyph="glyphicon-"+f[h]||"question-sign"}}}]),r.directive("loading",[function(){return{restrict:"E",template:'<div class="loadingStatus"></div>',replace:!0,scope:{status:"=status"},link:function(e,t){var n,a=["Locating the required gigapixels to render","Spinning up the hamster","Shovelling coal into the server","Programming the flux capacitor","640K ought to be enough for anybody","Would you prefer chicken, steak, or tofu?","Pay no attention to the man behind the curtain","Would you like fries with that?","Checking the gravitational constant in your locale","At least you're not on hold","The server is powered by a lemon and two electrodes","We love you just the way you are","Take a moment to sign up for our lovely prizes","Don't think of purple hippos","Wait while the satellite moves into position","It's still faster than you could draw it","My other load screen is much faster. You should try that one instead.","The version I have of this in testing has much funnier load screens","Loading humorous message","Warming up Large Hadron Collider","The magic elves are working frantically in here","Happy Elf and Sad Elf are talking about your data","All the relevant elves are on break","Elf down! We're cloning the elf that was supposed to get you the data","Time is an illusion. Loading time doubly so","Are we there yet?","Please insert 25Â¢","Hang on a sec, I know your data is here somewhere","HELP!, I'm being held hostage, and forced to write the stupid lines!","Searching for Answer to Life, the Universe, and Everything","Waiting for the system admin to hit enter","Paging for the system admin","Warming up the processors","RE-calibrating the internet","We apologise for the fault in the subtitles. Those responsible have been sacked","Counting backwards from infinity","Scanning your hard drive for credit card details. Please be patient","Don't panic","Loading the loading message","Potent potables","Reticulating Splines"];e.$watch("status",function(e){e===!1&&window.clearInterval(n),"failed"===e&&(window.clearInterval(n),t.html("Query failed... Please try again"))}),n=window.setInterval(function(){var e=a[Math.round(Math.random()*(a.length-1))];t.text(e+"...")},1500),t.text("Loading...")}}}]),r.directive("detailTabs",["$location",function(e){return{restrict:"A",replace:!0,scope:!0,templateUrl:t+"templates/directives/detailTabs.html",link:function(t,n){var r={app:"uptime",performance:"performance"},i=r[t.pageType];i&&(n.find("."+i).addClass("active"),n.on("click","a",function(n){var r=a(this);n.preventDefault(),n.stopPropagation(),r.parent().hasClass("active")||t.$apply(function(){e.path(r.attr("href"))})}))}}}])}(window.angular,window.assetPath,window.moment,window.jQuery),function(e,t){"use strict";var n=e.module("fsDashboard"),a=t+"api/";n.factory("httpInterceptors",["$location",function(){return function(e){return e.then(function(t){return t.status>399?e.reject(t):t},function(e){return e})}}]),n.config(["$httpProvider",function(e){e.responseInterceptors.push("httpInterceptors")}]),n.factory("changeService",["$http","$q",function(e,t){function n(){var n=t.defer();return e.get(a+"change/repos").success(n.resolve).error(n.reject),n.promise}function r(){var n=t.defer();return e.get(a+"change/types").success(n.resolve).error(n.reject),n.promise}return{repos:n,types:r}}]),n.factory("dashService",["$http","$q",function(e,t){function n(n,r){function i(n){return function(r){var i=t.defer(),s=a+u;return n&&(s+=n),r&&(s+=encodeURIComponent(r)),e.get(s).success(i.resolve).error(i.reject),i.promise}}var s,o,u=n,c={index:i(),details:i("/"),app:i("/app/"),graph:i("/histogram/"),pages:i("/pages/")},d={};for(s=0,o=r.length;o>s;s++)d[r[s]]=c[r[s]];return d}var r=n("app",["index","details"]),i=n("service",["index","details","app"]),s=n("upstream",["index","details"]),o=n("change",["index","app"]),u=n("performance",["details","graph","pages"]);return{app:r,service:i,upstream:s,change:o,performance:u}}])}(window.angular,window.assetPath),function(e,t){"use strict";var n=e.module("d3",[]);n.factory("d3Service",["$document","$q","$rootScope",function(e,n){var a=n.defer(),r=[t+"vendor/d3.v3.min.js",t+"vendor/rickshaw.min.js"],i=r.map(function(t){var a=n.defer(),r=e[0].createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onreadystatechange=function(){"complete"==this.readyState&&a.resolve()},r.onload=function(){a.resolve()};var i=e[0].getElementsByTagName("body")[0];return i.appendChild(r),a.promise});return n.all(i).then(function(){window.Rickshaw.namespace("Rickshaw.Graph.Renderer.UnstackedArea"),window.Rickshaw.Graph.Renderer.UnstackedArea=window.Rickshaw.Class.create(window.Rickshaw.Graph.Renderer.Area,{name:"unstackedarea",defaults:function(e){return window.Rickshaw.extend(e(),{unstack:!0,fill:!1,stroke:!1})}}),a.resolve([window.d3,window.Rickshaw])}),a.promise}])}(window.angular,window.assetPath),function(e,t,n){"use strict";var a=e.module("fsDashboard");a.directive("fsGraph",["d3Service",function(e){function a(a,r){e.then(function(e){function i(e,a,i){if(e){r.find(".inner-graph, .anotations").remove();var u=t('<div class="inner-graph"></div>').appendTo(r),c=(t('<div class="anotations"></div>').appendTo(r),i.max||0),d=0,l=new o.Color.Palette({scheme:"spectrum14"});l.color(),i.multiSeries?e.reverse().map(function(e){e.color=l.color();var t=s.max(e.data,function(e){return e.y});t>d&&(d=t)}):d=s.max(e,function(e){return e.y}),c>d&&(d=c),d*=1.25;var h={element:u[0],width:u[0].offsetWidth,height:i.height||60,renderer:"unstackedarea",stroke:!0};h.series=i.multiSeries?e.reverse():[{color:i.color||"#cae2f7",name:i.label,data:e}],u.empty();var f=new o.Graph(h);f.configure({max:d}),f.render();var m={graph:f,formatter:function(e,t,n,a,r,s){var o=i.suffix||"",u=s.value.label+": "||i.prefix||"";return u+n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+o}};i.multiSeries&&(m.xFormatter=function(e){var t=60*(new Date).getTimezoneOffset(),a=n.unix(e+t),r={formatted:a.format("h:mm a"),delta:a.fromNow()};return r.formatted+" ("+r.delta+")"});var p,g=(new o.Graph.HoverDetail(m),new o.Graph.Axis.Y({graph:f,ticks:3,tickFormat:o.Fixtures.Number.formatKMBT})),_={graph:f},y=i.type||"Time",p=new o.Graph.Axis[y](_);p.render(),g.render()}}var s=e[0],o=e[1],u=(r[0],r.data("fsGraph"));a.$watch(u.data,function(e){e&&(a.hasGraphs=!0,i(e.graphData,null,u))}),r.append('<h3 class="graph-title">'+u.title+"</h3>")})}return{link:a}}]),a.directive("uptimeGraphRickshaw",["$window","d3Service",function(e,a){function r(e,r){function i(a){function i(a,i){if(a){var _={};a.map(function(t){var n={app:t.app,upstream:t.meta,service:t,performance:t.meta},a=n[e.pageType]||{time:{},memory:{}},r={},i=new Date(t.created_at||a.created_at||t.bucket_time||t.app_errors.created_at);return r.date=i.getTime()/1e3-g,-1!==s.indexOf("tPut")&&(r.tPut=a.codes&&a.codes.total||0),-1!==s.indexOf("errRate")&&(r.errRate=a.error_rate||0),-1!==s.indexOf("mem")&&(r.mem=a.memory.avg||0),-1!==s.indexOf("time")&&(r.time95=a.time.p95||0,r.time50=a.time.p50||0),-1!==s.indexOf("pageReady95")&&(r.pageReady95=a.p95),-1!==s.indexOf("pageReady50")&&(r.pageReady50=a.p50),s.map(function(e){-1===["time","pageReady"].indexOf(e)&&("undefined"==typeof _[e]&&(_[e]=[]),"string"==typeof r[e]&&(r[e]=parseInt(r[e],10)||0),_[e].unshift({x:r.date,y:r[e]}))}),_}),s.map(function(e){if(-1===["time95","time75","time50","pageReady95","pageReady50"].indexOf(e)){var a,s,y,w,v,k,D,M,T,b=m[e],S=new u.Color.Palette({scheme:"spectrum14"});a=p[e]?p[e].empty():p[e]=t('<div class="graph-container"></div>').appendTo(r[0]),a.append('<span class="graph-title">'+c[e]+"</span>"),s=t('<div class="inner-graph"></div>').appendTo(a),y=t('<div class="anootations"></div>').appendTo(a),"time"===e?(v=0,["time95","time50"].map(function(e){var t=o.max(_[e],function(e){return e.y});t>v&&(v=t)})):"pageReady"===e?(v=0,["pageReady95","pageReady50"].map(function(e){var t=o.max(_[e],function(e){return e.y});t>v&&(v=t)})):(w=_[e],b=m[e],v=o.max(w,function(e){return e.y})),b&&b>v&&(v=b);var Y={element:s[0],width:s[0].offsetWidth,height:f[e]||60,renderer:"unstackedarea",stroke:!0};"time"===e?(Y.series=[{name:l.time95,data:_.time95},{name:l.time50,data:_.time50}],S.color(),Y.series[1].color=S.color(),Y.series[0].color=S.color()):"pageReady"===e?(Y.series=[{name:l.pageReady95,data:_.pageReady95},{name:l.pageReady50,data:_.pageReady50}],S.color(),Y.series[1].color=S.color(),Y.series[0].color=S.color()):Y.series=[{color:d[e]||"#cae2f7",name:l[e],data:w}],k=new u.Graph(Y),k.configure({max:v}),k.render(),D=new u.Graph.HoverDetail({graph:k,formatter:function(t,n,a){var r=h[e]||"",i="time"===e||"pageReady"===e?t.name+": ":"";return i+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+r},xFormatter:function(e){var t=n.unix(e+g),a={formatted:t.format("h:mm a"),delta:t.fromNow()};return a.formatted+" ("+a.delta+")"}});var x=new u.Graph.Annotate({graph:k,element:y[0]});i.map(function(e){if("jenkins"===e.type&&"build"===e.action||"electricCommander"===e.type&&"build"===e.action||"marrow"===e.type&&/restart/.test(e.action)){var t=n(new Date(e.created_at)),a={formatted:t.format("h:mm a"),delta:t.fromNow()},r=e.action+" @ "+a.formatted;x.add(new Date(e.created_at).getTime()/1e3-g,r)}}),x.update(),M=new u.Graph.Axis.Time({graph:k}),M.render(),T=new u.Graph.Axis.Y({graph:k,ticks:3,tickFormat:u.Fixtures.Number.formatKMBT}),T.render()}})}}var o=a[0],u=a[1],c=(r[0],{errRate:"Error Rate (%)",mem:"Memory Usage (MB)",time:"Response Time (ms)",time95:"p95",time50:"p50",tPut:"Requests (/5min)",pageReady:"RUM Page Ready"}),d={tPut:"#ABD9AB",errRate:"#D9534F",pageReady95:"#ABD9AB",pageReady50:"#ABD9AB"},l={errRate:"Err",mem:"Mem",time:"Response Time",time95:"p95",time50:"p50",tPut:"Req",pageReady95:"p95",pageReady50:"p50"},h={errRate:"%",mem:"MB",time:"ms",time95:"ms",time50:"ms",tPut:"req",pageReady95:"ms",pageReady50:"ms"},f={time:200},m={errRate:10,mem:512,time:5e3,time95:5e3,time50:5e3},p={},g=60*(new Date).getTimezoneOffset();"service"===e.pageType&&(m.time=1e3),u.namespace("Rickshaw.Graph.Renderer.UnstackedArea"),u.Graph.Renderer.UnstackedArea=u.Class.create(u.Graph.Renderer.Area,{name:"unstackedarea",defaults:function(e){return u.extend(e(),{unstack:!0,fill:!1,stroke:!1})}}),e.$watch("history.length",function(){i(e.history,e.events||[])})}if(t(r).is(":visible")){var s=[];e.hasThroughput&&s.push("tPut"),e.hasRespTime&&(s=s.concat(["time","time95","time50"])),e.hasRespTime&&s.push("tPut"),e.hasErrorRate&&s.push("errRate"),e.hasMemory&&s.push("mem"),e.hasPerformance&&(s=s.concat(["pageReady","pageReady95","pageReady50"])),s.length&&(e.hasGraphs=!0,a.then(i))}}return{link:r}}])}(window.angular,window.jQuery,window.moment);